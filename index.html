<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chiraitori - Portfolio</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <style>
        .progress-bar {
            transition: width 0.2s ease;
        }
        .card-dark {
            background: #ffffff;
            color: rgb(180, 168, 129);
        }
        .music-player img {
            object-fit: cover;
        }
        .bg-custom {
            background-color: #E57373; /* Replace with your hex color */
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm fixed-top">
        <div class="container">
            <a class="navbar-brand fw-bold" href="#">Chiraitori</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#home">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#about">About</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#projects">Projects</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#contact">Contact</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Hero Section with Discord Status -->
    <section id="home" class="min-vh-100 d-flex align-items-center bg-light">
        <div class="container text-center">
            <img src="https://www.chiraitori.io.vn/default.jpg" alt="Profile" class="rounded-circle mb-4 shadow" style="width: 150px; height: 150px;">
            <h1 class="display-4 fw-bold mb-3">Chiraitori</h1>
            <p class="lead text-muted mb-4">Full Stack Developer & UI/UX Designer</p>
            
            <!-- Discord Presence Card -->
            <div class="card card-dark mb-4 mx-auto" style="max-width: 400px;">
                <div class="card-body" id="discord-presence">
                    <div class="d-flex align-items-center mb-3">
                        <img src="/api/placeholder/48/48" alt="Discord Avatar" class="rounded-circle me-3" id="discord-avatar">
                        <div class="text-start">
                            <h5 class="mb-1" id="discord-username">Loading...</h5>
                            <p class="mb-0 text-muted" id="discord-status">Checking status...</p>
                        </div>
                    </div>
                    <!-- Music Player Section -->
                    <div class="music-player" id="music-player" style="display: none;">
                        <div class="d-flex align-items-center">
                            <img src="" alt="Album Art" class="rounded me-3" id="album-art" style="width: 60px; height: 60px;">
                            <div class="flex-grow-1">
                                <h6 class="text-brown mb-1" id="song-title"></h6>
                                <p class="text-muted small mb-0" id="song-artist"></p>
                                <div class="progress mt-2" style="height: 4px;">
                                    <div class="progress-bar bg-custom" role="progressbar" style="width: 0%"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="d-flex justify-content-center gap-3">
                <a href="#contact" class="btn btn-primary btn-lg px-4">Get in Touch</a>
                <a href="#projects" class="btn btn-outline-primary btn-lg px-4">View Projects</a>
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section id="about" class="py-5">
        <div class="container py-5">
            <h2 class="text-center display-5 mb-5">About Me</h2>
            <div class="row align-items-center">
                <div class="col-lg-6 mb-4 mb-lg-0">
                    <p class="lead text-muted">
                        I'm a passionate full-stack developer with experience in creating beautiful and functional web applications. I specialize in React, Node.js, and modern web technologies.
                    </p>
                    <div class="row g-4 mt-4">
                        <div class="col-md-6">
                            <div class="card h-100">
                                <div class="card-body">
                                    <h5 class="card-title">Frontend</h5>
                                    <p class="card-text">React, Vue.js, HTML5, CSS3</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card h-100">
                                <div class="card-body">
                                    <h5 class="card-title">Backend</h5>
                                    <p class="card-text">Node.js, Python, MongoDB</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="row g-4">
                        <div class="col-6">
                            <div class="card bg-primary text-white text-center h-100">
                                <div class="card-body">
                                    <h3 class="display-6">50+</h3>
                                    <p class="mb-0">Projects Completed</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="card bg-success text-white text-center h-100">
                                <div class="card-body">
                                    <h3 class="display-6">30+</h3>
                                    <p class="mb-0">Happy Clients</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="card bg-info text-white text-center h-100">
                                <div class="card-body">
                                    <h3 class="display-6">5+</h3>
                                    <p class="mb-0">Years Experience</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="card bg-warning text-white text-center h-100">
                                <div class="card-body">
                                    <h3 class="display-6">100%</h3>
                                    <p class="mb-0">Satisfaction</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Projects Section -->
    <section id="projects" class="py-5 bg-light">
        <div class="container py-5">
            <h2 class="text-center display-5 mb-5">Featured Projects</h2>
            <div class="row g-4" id="github-repos">
                <div class="col-12 text-center" id="loading-repos">
                    <div class="spinner-border text-primary" role="status">
                        <span class="visually-hidden">Loading...</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="py-5">
        <div class="container py-5">
            <h2 class="text-center display-5 mb-5">Get in Touch</h2>
            <div class="row justify-content-center">
                <div class="col-md-8">
                    <div class="card shadow">
                        <div class="card-body p-4">
                            <form>
                                <div class="row mb-3">
                                    <div class="col-md-6 mb-3 mb-md-0">
                                        <label class="form-label">Name</label>
                                        <input type="text" class="form-control" value="Chiraitori" readonly>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">Email</label>
                                        <input type="email" class="form-control" value="contact@chiraitori.io.vn" readonly>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Message</label>
                                    <textarea class="form-control" rows="4"></textarea>
                                </div>
                                <!-- <button type="submit" class="btn btn-primary w-100">Send Message</button> -->
                                <a href="mailto:contact@chiraitori.io.vn" class="btn btn-primary btn-lg px-4">Get in Touch</a>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-dark text-white py-4">
        <div class="container text-center">
            <div class="mb-3">
                <a href="https://discord.com/users/685716988471148552" class="text-white mx-2"><i class="bi bi-discord"></i></a>
                <a href="https://github.com/chiraitori" class="text-white mx-2"><i class="bi bi-github"></i></a>
                <a href="https://x.com/chiraitori" class="text-white mx-2"><i class="bi bi-twitter-x"></i></a>
            </div>
            <p class="mb-0 ">&copy; <script>document.write(new Date().getFullYear());</script> Chiraitori. All rights reserved.</p>
        </div>
    </footer>

    <!-- Bootstrap JS and Popper.js -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"></script>

    <!-- Custom Scripts -->
    <script>
        // Configuration
        const DISCORD_ID = '685716988471148552';
        const GITHUB_USERNAME = 'chiraitori';

        // Lanyard API Integration
        async function updateDiscordPresence() {
            try {
                const response = await fetch(`https://api.lanyard.rest/v1/users/${DISCORD_ID}`);
                const data = await response.json();
                
                if (data.success) {
                    const { discord_user, discord_status, activities, spotify } = data.data;
                    
                    // Update avatar
                    const avatarUrl = discord_user.avatar 
                        ? `https://cdn.discordapp.com/avatars/${discord_user.id}/${discord_user.avatar}.png`
                        : '/api/placeholder/48/48';
                    document.getElementById('discord-avatar').src = avatarUrl;
                    
                    // Update username
                    document.getElementById('discord-username').textContent = discord_user.username;
                    
                    // Update music player
                    const musicPlayer = document.getElementById('music-player');
                    
                    if (spotify) {
                        musicPlayer.style.display = 'block';
                        document.getElementById('song-title').textContent = spotify.song;
                        document.getElementById('song-artist').textContent = spotify.artist;
                        document.getElementById('album-art').src = spotify.album_art_url;
                        document.getElementById('discord-status').textContent = 'Listening to Spotify';
                        
                        // Update progress bar if timestamps are available
                        if (spotify.timestamps) {
                            const start = spotify.timestamps.start;
                            const end = spotify.timestamps.end;
                            const current = Date.now();
                            const progress = ((current - start) / (end - start)) * 100;
                            document.querySelector('.progress-bar').style.width = `${Math.min(100, progress)}%`;
                        }
                    } else {
                        const musicActivity = activities?.find(a => a.type === 2);
                        if (musicActivity) {
                            musicPlayer.style.display = 'block';
                            document.getElementById('song-title').textContent = musicActivity.details;
                            document.getElementById('song-artist').textContent = musicActivity.state;
                            if (musicActivity.assets?.large_image) {
                                const imageUrl = musicActivity.assets.large_image.startsWith('spotify:')
                                    ? `https://i.scdn.co/image/${musicActivity.assets.large_image.split(':')[1]}`
                                    : `https://cdn.discordapp.com/app-assets/${musicActivity.application_id}/${musicActivity.assets.large_image}.png`;
                                document.getElementById('album-art').src = imageUrl;
                            } else {
                                document.getElementById('album-art').src = '/api/placeholder/60/60';
                            }
                            document.getElementById('discord-status').textContent = `Listening to ${musicActivity.name}`;
                        } else {
                            musicPlayer.style.display = 'none';
                            document.getElementById('discord-status').textContent = 
                                discord_status.charAt(0).toUpperCase() + discord_status.slice(1);
                        }
                    }
                }
            } catch (error) {
                console.error('Error fetching Discord presence:', error);
                document.getElementById('discord-status').textContent = 'Status unavailable';
            }
        }

        // GitHub Pinned Repos Integration
        async function fetchGitHubPinnedRepos() {
            try {
                const response = await fetch(`https://gh-pinned-repos-tsj7ta5xfhep.deno.dev/?username=${GITHUB_USERNAME}`);
                const repos = await response.json();
                
                const reposContainer = document.getElementById('github-repos');
                document.getElementById('loading-repos')?.remove();
                
                if (!repos.length) {
                    reposContainer.innerHTML = `
                        <div class="col-12 text-center">
                            <p class="text-muted">No pinned repositories found</p>
                        </div>
                    `;
                    return;
                }

                repos.forEach(repo => {
                    const repoCard = `
                        <div class="col-md-6 col-lg-4">
                            <div class="card h-100">
                                <div class="card-body">
                                    <h5 class="card-title">
                                        <i class="bi bi-github me-2"></i>
                                        ${repo.repo}
                                    </h5>
                                    <p class="card-text">${repo.description || 'No description available'}</p>
                                    <div class="mt-3">
                                        <span class="badge bg-primary me-2" title="Stars">
                                            <i class="bi bi-star-fill me-1"></i>${repo.stars}
                                        </span>
                                        <span class="badge bg-secondary me-2" title="Forks">
                                            <i class="bi bi-diagram-2-fill me-1"></i>${repo.forks}
                                        </span>
                                        <span class="badge bg-${repo.language ? 'info' : 'secondary'}" title="Primary Language">
                                            ${repo.language || 'No language'}
                                        </span>
                                    </div>
                                </div>
                                <div class="card-footer bg-transparent">
                                    <a href="https://github.com/${GITHUB_USERNAME}/${repo.repo}" 
                                       class="btn btn-outline-primary btn-sm w-100" 
                                       target="_blank">
                                        View Repository
                                    </a>
                                </div>
                            </div>
                        </div>
                    `;
                    reposContainer.innerHTML += repoCard;
                });
            } catch (error) {
                console.error('Error fetching GitHub repos:', error);
                document.getElementById('github-repos').innerHTML = `
                    <div class="col-12 text-center">
                        <p class="text-danger">Error loading repositories</p>
                    </div>
                `;
            }
        }

        // Initialize APIs
        document.addEventListener('DOMContentLoaded', () => {
            updateDiscordPresence();
            fetchGitHubPinnedRepos();
            
            // Update Discord presence every 30 seconds
            setInterval(updateDiscordPresence, 1000);
        });

        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });
    </script>
</body>
</html>
